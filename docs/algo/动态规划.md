## å­ä¸²

### å›æ–‡å­ä¸²

- **dp\[i][j]**ï¼šè¡¨ç¤ºåŒºé—´èŒƒå›´[i,j] ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³é—­ï¼‰çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ï¼Œå¦‚æœæ˜¯dp\[i][j]ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚

- **æ ¸å¿ƒæ€æƒ³**ï¼šå½“s[i]ä¸s[j]ä¸ç›¸ç­‰ï¼Œé‚£æ²¡å•¥å¥½è¯´çš„äº†ï¼Œdp\[i][j]ä¸€å®šæ˜¯falseã€‚

  å½“s[i]ä¸s[j]ç›¸ç­‰æ—¶ï¼Œè¿™å°±å¤æ‚ä¸€äº›äº†ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µ

  æƒ…å†µä¸€ï¼šä¸‹æ ‡i ä¸ jç›¸åŒï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¾‹å¦‚aï¼Œå½“ç„¶æ˜¯å›æ–‡å­ä¸²
  æƒ…å†µäºŒï¼šä¸‹æ ‡i ä¸ jç›¸å·®ä¸º1ï¼Œä¾‹å¦‚aaï¼Œä¹Ÿæ˜¯å›æ–‡å­ä¸²
  æƒ…å†µä¸‰ï¼šä¸‹æ ‡ï¼ši ä¸ jç›¸å·®å¤§äº1çš„æ—¶å€™ï¼Œä¾‹å¦‚cabacï¼Œæ­¤æ—¶s[i]ä¸s[j]å·²ç»ç›¸åŒäº†ï¼Œæˆ‘ä»¬çœ‹iåˆ°jåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²å°±çœ‹abaæ˜¯ä¸æ˜¯å›æ–‡å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆabaçš„åŒºé—´å°±æ˜¯ i+1 ä¸ j-1åŒºé—´ï¼Œè¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å°±çœ‹dp\[i + 1][j - 1]æ˜¯å¦ä¸ºtrueã€‚

**æ ¸å¿ƒä»£ç **

  ```java
  if (s[i] == s[j]) {
      if (j - i <= 1) { // æƒ…å†µä¸€ å’Œ æƒ…å†µäºŒ
          result++;
          dp[i][j] = true;
      } else if (dp[i + 1][j - 1]) { // æƒ…å†µä¸‰
          result++;
          dp[i][j] = true;
      }
  }
  ```

### æœ€é•¿å›æ–‡å­ä¸²

æ€è·¯å’Œå›æ–‡å­ä¸²ç›¸åŒï¼Œå†åˆ¤æ–­å›æ–‡å­ä¸²çš„åœ°æ–¹åŠ ä¸Šstart,endç”¨æ¥æ›´æ–°æœ€ç»ˆæŒ‡å‘å­—ç¬¦ä¸²çš„ä¸‹æ ‡ã€‚



- **dp\[i][j]**: è¡¨ç¤ºåŒºé—´èŒƒå›´[i,j] ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³é—­ï¼‰çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ï¼Œå¦‚æœæ˜¯dp\[i][j]ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚

- int result = 0;int start = 0;int end = 0;//resultè¡¨ç¤ºçš„ä¸ºå›æ–‡å­ä¸²çš„é•¿åº¦ï¼›start,endåˆ†åˆ«è¡¨ç¤ºå›æ–‡å­ä¸²çš„å¼€å§‹ä¸ç»“æŸã€‚

**æ ¸å¿ƒä»£ç **:

  ```
  if (s.charAt(i) == s.charAt(j) && (j - i <= 1 || dp[i + 1][j - 1])) {
      if(result < j-i+1){
          start = i;
          end = j;
          result = j-i+1;
      }
          dp[i][j] = true;
  }
      
  ```
## å­æ•°ç»„

### æœ€é•¿é€’å¢å­æ•°ç»„

- **dp[i]**: ...ä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­æ•°ç»„çš„é•¿åº¦

**æ ¸å¿ƒä»£ç **

  ```java
  for(int i=1;i<nums.length;i++){
              dp[i] = 1;
              if(nums[i]>nums[i-1]){
                  dp[i] = dp[i-1]+1;    
              }
              result = Math.max(result,dp[i]);
          }
  ```

  [ç±»ä¼¼é¢˜ç›®](#æœ€é•¿é€’å¢å­åºåˆ—)

### æœ€å¤§å­åºå’Œ

![image-20210816195028496](åŠ¨æ€è§„åˆ’.assets/image-20210816195028496.png)

- **dp[i]:** ä»¥nums[i]ç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ
- **æ ¸å¿ƒæ€æƒ³**ï¼šdp[i] = Math.max(dp[i-1]+nums[i],nums[i]);

**å®Œæ•´ä»£ç **

```java
class Solution {
    public int maxSubArray(int[] nums) {
        //dp[i]:è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ 
        int[] dp = new int[nums.length];
        int result = nums[0];
        dp[0]=nums[0];
        for(int i=1;i<nums.length;i++){
            dp[i] = Math.max(dp[i-1]+nums[i],nums[i]);
            result = Math.max(result,dp[i]);
        }
        return result;
        
    }
}
```



### ç­‰å·®æ•°åˆ—åˆ’åˆ†

![](åŠ¨æ€è§„åˆ’.assets/image-20210813101759089.png)

- **æ³¨æ„**ï¼š é¢˜ç›®è¦æ±‚çš„æ˜¯å­æ•°ç»„çš„ä¸ªæ•°ï¼Œä¸å­ä¸²æœ‰äº›ç±»ä¼¼ï¼Œä½†è¿™é‡Œä¸èƒ½ç”¨æ±‚å­ä¸²çš„æ–¹æ³•ã€‚å› ä¸ºæ±‚å­ä¸²æ ¸å¿ƒæ€æƒ³é‡Œå¯ä»¥åˆ¤æ–­s.charAt(i)ä¸s.charAt(j)æ˜¯å¦ç›¸ç­‰æ¥åˆ¤æ–­æ˜¯å¦å›æ–‡ï¼Œè€Œç”±äºnums[i]ä¸nums[j]ä¹‹é—´æœ‰æ²¡æœ‰å…¶ä»–çš„æ•°æˆ–è€…æœ‰å¤šå°‘æ•°æˆ‘ä»¬æ˜¯æ— ä»åˆ¤æ–­çš„ï¼Œæ‰€ä»¥æœ¬é¢˜æ— æ³•å¥—æ±‚å­ä¸²çš„æ€è·¯æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç­‰å·®æ•°åˆ—ã€‚

- **dp\[i][j]**: ä»¥æ•°ç»„ç¬¬iä¸ªå…ƒç´ ç»“å°¾çš„ç­‰å·®æ•°åˆ—çš„ä¸ªæ•°ä¸ºdp[i]

- int diff = nums[1]-nums[0];int num=0; //diffè¡¨ç¤ºå·®å€¼ï¼Œnumè¡¨ç¤ºæ€»çš„ç­‰å·®æ•°åˆ—çš„ä¸ªæ•°

- **æ ¸å¿ƒæ€æƒ³**: å½“nums[i]-nums[i-1]==diffæ—¶ï¼Œé‚£æ²¡å•¥å¥½è¯´çš„äº†ï¼Œè‚¯å®šæ˜¯ç­‰å·®æ•°åˆ—ï¼Œåˆ™dp[i] = dp[i-1]+1 ï¼Œnum+=dp[i]; 

  å¦‚æœ!=diff,æ›´æ–°ä¸€ä¸‹diff,å³diff = nums[i]-nums[i-1];

**å®Œæ•´ä»£ç **

  ```java
      //ç›´æ¥åŠ¨è§„
      // public int numberOfArithmeticSlices(int[] nums) {
  
      //     //dp[i]è¡¨ç¤ºä»¥nums[i]ä¸ºç­‰å·®æ•°åˆ—ç»“å°¾çš„ç­‰å·®æ•°åˆ—ä¸ªæ•°
      //     int n = nums.length;
      //     int dp[] = new int[n];
      //     if(nums.length<3){
      //         return 0;
      //     }
      //     int diff = nums[1]-nums[0];
      //     int num=0;
      //     for(int i=2;i<n;i++){
      //         if(nums[i]-nums[i-1]==diff){
      //             dp[i] = dp[i-1]+1;
      //             num+=dp[i];
      //         }else{
      //             diff = nums[i]-nums[i-1];
      //         }
      //     }
      //     return num;
      // }
  //çŠ¶æ€å‹ç¼©
      // public int numberOfArithmeticSlices(int[] nums) {
  
      //     //dp[i]è¡¨ç¤ºä»¥nums[i]ä¸ºç­‰å·®æ•°åˆ—ç»“å°¾çš„ç­‰å·®æ•°åˆ—ä¸ªæ•°
      //     int n = nums.length;
      //     int pre = 0;
      //     if(nums.length<3){
      //         return 0;
      //     }
      //     int diff = nums[1]-nums[0];
      //     int num=0;
      //     for(int i=2;i<n;i++){
      //         if(nums[i]-nums[i-1]==diff){
      //             pre = pre+1; 
      //             num+=pre;
      //         }else{
      //             diff = nums[i]-nums[i-1];
      //             pre=0;
      //         }
      //     }
      //     return num;
      // }
  ```

### ç­‰å·®æ•°åˆ—åˆ’åˆ† II -  å­åºåˆ—

è¯¦è§[å­åºåˆ—éƒ¨åˆ†](#ç­‰å·®æ•°åˆ—åˆ’åˆ† II - å­åºåˆ—)



## å­åºåˆ—
### æœ€é•¿å›æ–‡å­åºåˆ—

- **dp\[i][j]**: è¡¨ç¤ºå­—ç¬¦ä¸²sä»iåˆ°jæœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦

- **æ ¸å¿ƒæ€æƒ³**: å½“s[i]ä¸s[j]ç›¸ç­‰ï¼Œé‚£æ²¡å•¥å¥½è¯´çš„äº†ï¼Œdp\[i][j]ä¸€å®šæ˜¯ç­‰äºdp\[i+1][j-1]+2ã€‚

  å½“s[i]ä¸s[j]ä¸ç›¸ç­‰,dp\[i][j]åº”è¯¥ç­‰äºdp\[i+1][j], dp\[i+1][j-1], dp\[i][j-1]çš„æœ€å¤§å€¼ã€‚

**æ ¸å¿ƒä»£ç **: 

   ```java
    if(s.charAt(i)==s.charAt(j)){
        dp[i][j] = dp[i+1][j-1]+2;
    }
    else{
        dp[i][j] = Math.max(dp[i][j-1],Math.max(dp[i+1][j],dp[i+1][j-1]));
    }
   ```

### æœ€é•¿å…¬å…±å­åºåˆ—

![image-20210814172407637](åŠ¨æ€è§„åˆ’.assets/image-20210814172407637.png)

- **dp\[i][j]**: å­—ç¬¦ä¸²text1ä»0-i,ä¸å­—ç¬¦ä¸²text2ä»0åˆ°jçš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦

- **æ ¸å¿ƒæ€æƒ³**ï¼š å¦‚æœtext1çš„ç¬¬iä¸ªå…ƒç´ ç­‰äºtext2çš„ç¬¬jä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆä¸ç”¨è¯´äº†ï¼Œdp\[i][j] = dp\[i-1][j-1];

  å¦‚æœä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å¾—åˆ°text1çš„ç¬¬iä¸ªå…ƒç´ ä½¿å¾—å­åºåˆ—é•¿åº¦æœ€å¤§è¿˜æ˜¯å¾—åˆ°text2çš„ç¬¬jä¸ªå…ƒç´ ä½¿å¾—å­åºåˆ—é•¿åº¦æœ€å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬è·å¾—ä¸¤è€…æœ€å¤§å€¼å³å¯ï¼Œ(dp\[i-1][j-1]å†™ä¸å†™éƒ½ä¸å½±å“)å³dp\[i][j]=Math.max(dp\[i-1][j], Math.max(dp\[i-1][j-1],dp\[i][j-1]));

- **åˆå§‹åŒ–**ï¼šæ­£å¸¸åˆå§‹åŒ–å³å¯ï¼Œè¯·çœ‹ä¸‹é¢å®Œæ•´ä»£ç 

**å®Œæ•´ä»£ç **

  ```java
  class Solution {
      public int longestCommonSubsequence(String text1, String text2) {
  		//dp[i][j] å­—ç¬¦ä¸²text1ä»0-i,å’Œå­—ç¬¦ä¸²text2ä»0-jçš„å…¬å…±å­åºåˆ—çš„é•¿åº¦
  		int dp[][] = new int[text1.length()][text2.length()];
          for(int i=0;i<text2.length();i++){
              if(text2.charAt(i)==text1.charAt(0)){
                  for(int j=i;j<text2.length();j++){
                      dp[0][j] = 1;
                  }
                  break;
              }
          }
          for(int i=0;i<text1.length();i++){
              if(text1.charAt(i)==text2.charAt(0)){
                  for(int j=i;j<text1.length();j++){
                      dp[j][0] = 1;
                  }
                  break;
              }
          }
  		for(int i=1;i<text1.length();i++) {
  			for(int j=1;j<text2.length();j++) {
  				if(text1.charAt(i)==text2.charAt(j)) {
  					dp[i][j]=dp[i-1][j-1]+1;
  				}
  				else {
  					dp[i][j]=Math.max(dp[i-1][j], Math.max(dp[i-1][j-1],dp[i][j-1]));
  				}
  			}
  			
  		}
  		return dp[text1.length()-1][text2.length()-1];
      }
  }
  ```

### æœ€é•¿é€’å¢å­åºåˆ—

![image-20210815202553737](åŠ¨æ€è§„åˆ’.assets/image-20210815202553737.png)

- **æ³¨æ„**: è¿™æ˜¯å­åºåˆ—çš„ç±»å‹ã€‚

- **dp\[i]**:  ä»¥nums[i]çš„ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚[1,5,2,3,4] ,dp[4]å¾—åˆ°çš„æœ€é•¿é€’å¢å­åºåˆ—ä¸º2,3,4ï¼Œå³dp[4]=3

- **æ ¸å¿ƒæ€æƒ³**: dpæ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º1ï¼Œå¦‚æœdp[j]<dp[i],æ›´æ–°dp[i],å³dp[i] = Math.max(dp[i],dp[j]+1)ï¼›

- **æé†’**ï¼š æˆ‘ä»¬éå†çš„ç›®çš„æ˜¯æ‰¾åˆ°ä»j...åˆ°içš„æœ€é•¿åºåˆ—ï¼Œå¦‚ä¸‹ä»£ç ç¬¬ä¸€ä¸ªforå¾ªç¯æ˜¯ä¸ºäº†å›ºå®ši,ç¬¬äºŒä¸ªforå¾ªç¯æ˜¯ä¸ºäº†å›ºå®šj

**æ ¸å¿ƒä»£ç **

```java

for(int i=0;i<nums.length;i++){
            dp[i] = 1;
            for(int j=0;j<i;j++){
                if(nums[i]>nums[j]){
                    dp[i] = Math.max(dp[i],dp[j]+1);
                }
            }
            result = Math.max(result,dp[i]);
        }

```



**å®Œæ•´ä»£ç **

```java
class Solution {
    public int lengthOfLIS(int[] nums) {
        //dp[i]: ...åˆ°içš„é€’å¢å­åºåˆ—ï¼ˆå¿…é¡»åŒ…å«iï¼‰çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚[1,5,2,3,4] ,dp[4]å¾—åˆ°çš„æœ€é•¿é€’å¢å­åºåˆ—ä¸º2,3,4
        int result = 0;
        int[] dp = new int[nums.length];
        for(int i=0;i<nums.length;i++){
            dp[i] = 1;
            for(int j=0;j<i;j++){
                if(nums[i]>nums[j]){
                    dp[i] = Math.max(dp[i],dp[j]+1);
                }
            }
            result = Math.max(result,dp[i]);
        }
        return result;
    }
}
```
### ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜

![image-20210816123722774](åŠ¨æ€è§„åˆ’.assets/image-20210816123722774.png)

- **dp[i]**: ä»¥envelopes[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦

- **æ ¸å¿ƒæ€æƒ³**: ä¸[æœ€é•¿é€’å¢å­åºåˆ—](#æœ€é•¿é€’å¢å­åºåˆ—)ä¸€æ ·

- **æ ¸å¿ƒä»£ç **ï¼šåœ¨è¿›è¡Œå¾ªç¯å‰éœ€è¦å…ˆå¯¹envelopesè¿›è¡Œæ’åºå¤„ç†ï¼Œå¯ä»¥æŒ‰ç…§ç¬¬ä¸€ä¸ªå…ƒç´ ä»å°åˆ°å¤§ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ç›¸ç­‰åˆ™æŒ‰ç…§ç¬¬äºŒä¸ªå…ƒç´ ä»å¤§åˆ°å°æ’åºï¼Œè¿™é‡Œå¿…é¡»ä»å¤§åˆ°å°ï¼Œå› ä¸ºå¦‚æœä¸¤å°ä¿¡ç›¸ç­‰ï¼Œé‚£ä¹ˆå¿…é¡»æœ‰ä¸€å°è£…ä¸äº†è€Œèˆå¼ƒï¼Œä»å¤§åˆ°å°æ’dp[i]å°±ä¸ä¼šå¤§äºdp[j],ä»è€Œèˆå¼ƒdp[i]ï¼Œä¹Ÿå°±æ˜¯è¯´dp[i]

  ä¸¾ä¸ªğŸŒ°ï¼Œè¾“å…¥[[4,5],[4,6],[6,7],[2,3],[1,1]]ï¼Œ

  æŒ‰ç…§æ­£ç¡®æ’åºç»“æœä¸º[[1, 1], [2, 3], [4, 6], [4, 5], [6, 7]]ï¼Œ

  æŒ‰ç…§é”™è¯¯æ’åºç»“æœä¸º[[1, 1], [2, 3], [4, 5], [4, 6], [6, 7]]ï¼Œä½¿ç”¨è¿™ç§ä¼šå¤šä¸€ä¸­1,3,5,6,7è¿™ç§ç»“æœæ˜¾ç„¶æ˜¯ä¸å¯¹çš„

```java
Arrays.sort(envelopes,new Comparator<int[]>(){
            @Override
            public int compare(int[] o1,int[] o2){
                return o1[0]==o2[0]?o2[1]-o1[1]:o1[0]-o2[0];
            }
        });
        for(int i=0;i<n;i++){
            dp[i] = 1;
            for(int j=0;j<i;j++){
                if(envelopes[i][1]>envelopes[j][1]){
                    dp[i] = Math.max(dp[i],dp[j]+1);
                }
            }
            result = Math.max(result,dp[i]);
        }
```



- **å®Œæ•´ä»£ç **

```java
class Solution {
    public int maxEnvelopes(int[][] envelopes) {
        //dp[i]:ä»¥nums[i]ç»“å°¾çš„ ç»„æˆä¸€ç»„â€œä¿„ç½—æ–¯å¥—å¨ƒâ€ä¿¡å°çš„æœ€å¤§ä¿¡å°æ•°
        int n = envelopes.length;
        int[] dp = new int[n];
        int result = 0;
        Arrays.sort(envelopes,new Comparator<int[]>(){
            @Override
            public int compare(int[] o1,int[] o2){
                return o1[0]==o2[0]?o2[1]-o1[1]:o1[0]-o2[0];
            }
        });
        for(int i=0;i<n;i++){
            dp[i] = 1;
            for(int j=0;j<i;j++){
                if(envelopes[i][1]>envelopes[j][1]){
                    dp[i] = Math.max(dp[i],dp[j]+1);
                }
            }
            result = Math.max(result,dp[i]);
        }
        return result;
    }
}
```



### æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°

![image-20210816110953397](åŠ¨æ€è§„åˆ’.assets/image-20210816110953397.png)

- **dp[i]**: ä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦
  **count[i]**ï¼šä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—ä¸ªæ•°

  **åˆå§‹åŒ–**ï¼šå‡ä¸º1

- **æ ¸å¿ƒæ€æƒ³**ï¼šæ¯”[æœ€é•¿é€’å¢å­åºåˆ—](#æœ€é•¿é€’å¢å­åºåˆ—)å¤šäº†ä¸€ä¸ªcountæ•°ç»„ï¼Œåœ¨å¤„ç†dpæ•°ç»„æ—¶ä¹ŸæŠŠcountæ•°ç»„å¤„ç†ä¸€ä¸‹

- **æ ¸å¿ƒä»£ç **ï¼š åˆ¤æ–­æ¡ä»¶å¦‚æœä¸è€ƒè™‘countæ•°ç»„çš„è¯ï¼Œå®é™…ä¸Šå°±æ˜¯dp[i]=Math.max(dp[i],dp[j]+1)çš„åˆ†å¼€ç‰ˆï¼›

  å¦‚æœdp[j]+1>dp[i],dp[i]çš„æœ€é•¿é€’å¢å­åºåˆ—å°±å¢åŠ äº†ï¼Œdp[i]=dp[j]+1;æŠŠcount[j]èµ‹å€¼ç»™count[i]ï¼Œæ˜¯å› ä¸ºæŠŠnums[i]æ·»åŠ åˆ°nums[j]çš„å­åºåˆ—åï¼Œæœ€é•¿å­åºåˆ—çš„æ•°é‡æ²¡æœ‰å˜åŒ–ã€‚*ç›¸å½“äºæŠŠåŸæ¥çš„count[i]ä¸¢å¼ƒäº†ï¼Œå› ä¸ºæœ€é•¿é€’å¢å­åºåˆ—å¢åŠ éœ€è¦æ›´æ–°count*

  å¦‚æœdp[j]+1==dp[i],è¯´æ˜æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ç›¸åŒï¼ŒæŠŠnums[i]æ·»åŠ åˆ°nums[j]çš„å­åºåˆ—åï¼Œä»¥nums[i]ç»“å°¾çš„å­åºåˆ—çš„æ•°é‡å¢åŠ äº†count[j].*è¿™ä¸ªæ—¶å€™ä¸ç”¨æŠŠcount[i]ä¸¢å¼ƒï¼Œå› ä¸ºæœ€é•¿é€’å¢å­åºåˆ—å¹¶æœªå¢åŠ ï¼Œåœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ ä¸Šcount[j]å³å¯ã€‚*

 ```java
  if(nums[i] > nums[j]){
      if(dp[j] + 1 > dp[i]){
          dp[i] = dp[j] + 1;
          count[i] = count[j];
      }else if(dp[j] + 1 == dp[i]){
          count[i] += count[j];
      }
  }
 ```

**å®Œæ•´ä»£ç **

```java
class Solution {
    public int findNumberOfLIS(int[] nums) {
        int result = 0;
        //**dp[i]**: ä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦
//**count[i]**ï¼šä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—ä¸ªæ•°
        int[] count = new int[nums.length];
        int[] dp = new int[nums.length];
        for(int i=0;i<nums.length;i++){
            dp[i] = 1;
            count[i]=1;
            for(int j=0;j<i;j++){
                if(nums[i]>nums[j]){
                    if(dp[j]+1>dp[i]){
                        dp[i]=dp[j]+1;
                        count[i]=count[j];
                    }
                    else if(dp[j]+1==dp[i]){
                        count[i]+=count[j];
                    }
                }                     
            }
            result = Math.max(result,dp[i]);
        }
        int res = 0;
        for(int i=0;i<nums.length;i++){
            if(dp[i]==result){
                res+=count[i];
           }
       }
        return res;
    }
}
```



### ç­‰å·®æ•°åˆ—åˆ’åˆ† II - å­åºåˆ—

![image-20210813105249421](åŠ¨æ€è§„åˆ’.assets/image-20210813105249421.png)


- **æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªå­åºåˆ—ç±»å‹çš„é¢˜ç›®,è€Œ[ç­‰å·®æ•°åˆ—åˆ’åˆ†](#ç­‰å·®æ•°åˆ—åˆ’åˆ†)æ˜¯å­æ•°ç»„ä¹Ÿå¯ä»¥è¯´æ˜¯å­ä¸²(å­—ç¬¦ä¸²ç±»å‹çš„ï¼Œä¸å­æ•°ç»„æœ¬è´¨ä¸€æ ·)ç±»å‹çš„ã€‚

- Mapdp.get(j) {key:å·®å€¼ï¼Œvalue:ä»¥nums[j]ä¸ºç»“å°¾ï¼Œå·®å€¼ä¸ºdçš„å¼±ç­‰å·®å­åºåˆ—çš„ä¸ªæ•°},è¿™é‡Œä½¿ç”¨HashMapæ˜¯ç”±äºä»£ç å®ç°æ—¶ï¼Œç”±äºnums[i] çš„èŒƒå›´å¾ˆå¤§ï¼Œæ‰€ä»¥è®¡ç®—å‡ºçš„å…¬å·®çš„èŒƒå›´ä¹Ÿå¾ˆå¤§ï¼Œæˆ‘ä»¬å¯ä»¥å°†çŠ¶æ€è½¬ç§»äºŒç»´æ•°ç»„ç”¨å“ˆå¸Œè¡¨ä»£æ›¿ã€‚

**å®Œæ•´ä»£ç **

  ```java
 public int numberOfArithmeticSlices(int[] nums) {
          // å¼±ç­‰å·®å­åºåˆ—çš„é•¿åº¦è‡³å°‘ä¸º2
          int ans = 0, n = nums.length;
          HashMap<Long, Integer>[] dp = new HashMap[n];
          for(int i = 0; i < n; i++) {
              dp[i] = new HashMap<>();
          }
          for(int i = 0; i < n; i++) {
              for(int j = 0; j < i; j++) {
                  // é¦–å…ˆè®¡ç®—nums[i] å’Œ nums[j] ä¹‹é—´çš„å·®å€¼
                  long d = 1L * nums[i] - nums[j];
                  // è·å¾—ä»¥nums[j]ä¸ºç»“å°¾ï¼Œå·®å€¼ä¸ºdçš„å¼±ç­‰å·®å­åºåˆ—çš„ä¸ªæ•°
                  int cnt = dp[j].getOrDefault(d, 0);
                  // æ‰€æœ‰ä»¥nums[j]ä¸ºç»“å°¾ï¼Œå·®å€¼ä¸ºdçš„å¼±ç­‰å·®å­åºåˆ—åŠ ä¸Šnums[i]åé•¿åº¦è‡³å°‘ä¸º3ï¼Œä¸€å®šæ˜¯ç¬¦åˆé¢˜æ„çš„ä¸€ä¸ªç­‰å·®å­åºåˆ—
                  ans += cnt;
                  // ä»¥nums[i]ç»“å°¾ï¼Œå·®å€¼ä¸ºdçš„å¼±ç­‰å·®å­åºåˆ—çš„ä¸ªæ•°åº”è¯¥åŠ ä¸Šä¸¤éƒ¨åˆ†
                  //      ä¸€éƒ¨åˆ†ä»¥nums[j]ä¸ºç»“å°¾ï¼Œå·®å€¼ä¸ºdçš„å¼±ç­‰å·®å­åºåˆ—çš„ä¸ªæ•°
                  //      å¦ä¸€éƒ¨åˆ†æ˜¯nums[j], nums[i]è¿™ä¸¤ä¸ªå…ƒç´ æ„æˆçš„å¼±ç­‰å·®å­åºåˆ—
                  dp[i].put(d, dp[i].getOrDefault(d, 0) + cnt + 1);
              }
          }
          return ans;
      }
  
  ```

  





## å¾…å†™

368. æœ€å¤§æ•´é™¤å­é›†	
740. åˆ é™¤å¹¶è·å¾—ç‚¹æ•°	
978. æœ€é•¿æ¹æµå­æ•°ç»„	
1035. ä¸ç›¸äº¤çš„çº¿	
1713. å¾—åˆ°å­åºåˆ—çš„æœ€

```
'å•ä¸²é—®é¢˜ï¼šæœ€ç»å…¸å•ä¸² LIS ç³»åˆ—': ['æœ€é•¿ä¸Šå‡å­åºåˆ—', 'æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°', 'ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜'],
 'å•ä¸²é—®é¢˜ï¼šæœ€å¤§å­æ•°ç»„å’Œç³»åˆ—': ['æœ€å¤§å­åºå’Œ',
  'ä¹˜ç§¯æœ€å¤§å­ç»„æ•°',
  'ç¯å½¢å­æ•°ç»„çš„æœ€å¤§å’Œ',
  'æœ€å¤§å­çŸ©é˜µ',
  'çŸ©å½¢åŒºåŸŸä¸è¶…è¿‡ K çš„æœ€å¤§æ•°å€¼å’Œ'],
 'å•ä¸²é—®é¢˜ï¼šæ‰“å®¶åŠ«èˆç³»åˆ—': ['æ‰“å®¶åŠ«èˆ', 'æ‰“å®¶åŠ«èˆ II', 'åˆ é™¤ä¸è·å¾—ç‚¹æ•°', '3n å—æŠ«è¨'],
 'å•ä¸²é—®é¢˜ï¼šå˜å½¢ï¼Œéœ€è¦ä¸¤ä¸ªä½ç½®çš„æƒ…å†µ: dp[i][j] ä»¥ j, i ç»“å°¾': ['æœ€é•¿çš„æ–æ³¢é‚£å¥‘å­åºåˆ—çš„é•¿åº¦', 'æœ€é•¿ç­‰å·®æ•°åˆ—'],
 'å•ä¸²é—®é¢˜ï¼šä¸å…¶å®ƒç®—æ³•é…åˆ': ['æœ€å¤§æ•´é™¤å­é›†'],
 'å•ä¸²é—®é¢˜ï¼šå…¶å®ƒå•ä¸² dp[i] é—®é¢˜': ['æœ€é•¿æœ‰æ•ˆæ‹¬å·',
  'ç­‰å·®æ•°åˆ—åˆ’åˆ†',
  'è§£ç æ–¹æ³•',
  'åˆ†å‰²å›æ–‡ä¸² II',
  'æ¯”ç‰¹ä½è®¡æ•°',
  'ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°',
  'æœ€ä½åŠ æ²¹æ¬¡æ•°',
  'ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ'],
 'å•ä¸²é—®é¢˜ï¼šå¸¦ç»´åº¦å•ä¸² dp[i][k]ï¼Œi ä¸ºä½ç½®ï¼Œk ä¸ºé™„åŠ çš„ç»´åº¦': ['æœ€å¤§å¹³å‡å€¼å’Œçš„åˆ†ç»„',
  'é¸¡è›‹æ‰è½',
  'ç²‰åˆ·æˆ¿å­',
  'ç²‰åˆ·æˆ¿å­ II',
  'å¥‡å¶è·³',
  'é’è›™è¿‡æ²³',
  'å®‰æ’é‚®ç­’',
  'æŠ›æ·ç¡¬å¸',
  'åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼',
  'ç»™æˆ¿å­æ¶‚è‰² III'],
 'å•ä¸²é—®é¢˜ï¼šè‚¡ç¥¨ç³»åˆ—: dp[i][k][state] i æ˜¯æ—¶é—´ï¼Œk æ˜¯æ¬¡æ•°ï¼Œstate æ˜¯çŠ¶æ€': ['ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº',
  'ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II',
  'ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III',
  'ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV',
  'æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ',
  'ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹'],
 'åŒä¸²': [],
 'åŒä¸²é—®é¢˜ï¼šæœ€ç»å…¸åŒä¸² LCS ç³»åˆ—': ['æœ€é•¿å…¬å…±å­åºåˆ—', 'ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€å° ASCII åˆ é™¤å’Œ', 'æœ€é•¿é‡å¤å­æ•°ç»„'],
 'åŒä¸²é—®é¢˜ï¼šå­—ç¬¦ä¸²åŒ¹é…ç³»åˆ—': ['ç¼–è¾‘è·ç¦»', 'é€šé…ç¬¦åŒ¹é…', 'æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…'],
 'åŒä¸²é—®é¢˜ï¼šå…¶å®ƒåŒä¸² dp[i][j] é—®é¢˜': ['äº¤é”™å­—ç¬¦ä¸²', 'ä¸åŒçš„å­åºåˆ—'],
 'åŒä¸²é—®é¢˜ï¼šå¸¦ç»´åº¦åŒä¸² dp[i][j][k]': ['æ‰°ä¹±å­—ç¬¦ä¸²'],
 'çŸ©é˜µ': [],
 'çŸ©é˜µé—®é¢˜ï¼šçŸ©é˜µ dp[i][j]': ['ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ', 'æœ€å°è·¯å¾„å’Œ', 'åœ°ä¸‹åŸæ¸¸æˆ', 'æœ€å¤§æ­£æ–¹å½¢', 'ä¸‹é™è·¯å¾„æœ€å°å’Œ'],
 'çŸ©é˜µé—®é¢˜ï¼šçŸ©é˜µ dp[i][j][k]': ['æœ€å¤§çŸ©å½¢', 'çŸ©å½¢åŒºåŸŸä¸è¶…è¿‡ K çš„æœ€å¤§æ•°å€¼å’Œ', 'æœ€å¤§å­çŸ©é˜µ', 'åˆ‡æŠ«è¨çš„æ–¹æ¡ˆæ•°'],
 'å¸¦ç»´åº¦å•ä¸² dp[i][k]': [],
 'æ— ä¸²çº¿æ€§é—®é¢˜': ['åªæœ‰ä¸¤ä¸ªé”®çš„é”®ç›˜', 'ä¸‘æ•° II', 'å®Œå…¨å¹³æ–¹æ•°', 'æ•´æ•°æ‹†åˆ†'],
 'æ€»ç»“': [],
 'å‰ç¼€å’Œç®€ä»‹': [],
 'æ±‚åŒºé—´å’Œ': [],
 'å®ç°å‰ç¼€å’Œé—®é¢˜': ['åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜', 'äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜'],
 'æ•°æ®ç»“æ„ç»´æŠ¤å‰ç¼€å’Œé—®é¢˜ï¼šHashMap ç»´æŠ¤ï¼ˆ1ï¼‰': [],
 'æ•°æ®ç»“æ„ç»´æŠ¤å‰ç¼€å’Œ': ['å’Œç­‰äº k çš„æœ€é•¿å­æ•°ç»„é•¿åº¦', 'è¿ç»­æ•°ç»„', 'æ¯ä¸ªå…ƒéŸ³åŒ…å«å¶æ•°æ¬¡çš„æœ€é•¿å­å­—ç¬¦ä¸²'],
 'æ•°æ®ç»“æ„ç»´æŠ¤å‰ç¼€å’Œé—®é¢˜ï¼šHashMap ç»´æŠ¤ï¼ˆ2ï¼‰': ['å’Œä¸º K çš„å­æ•°ç»„', 'ç»Ÿè®¡ä¼˜ç¾å­æ•°ç»„'],
 'æ•°æ®ç»“æ„ç»´æŠ¤å‰ç¼€å’Œé—®é¢˜ï¼šHashMap ç»´æŠ¤ï¼ˆ3ï¼‰': ['è¿ç»­çš„å­æ•°ç»„å’Œ', 'å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„'],
 'æ•°æ®ç»“æ„ç»´æŠ¤å‰ç¼€å’Œé—®é¢˜ï¼šå‰ç¼€å’Œï¼ˆç§¯ï¼‰ä¸åç¼€å’Œï¼ˆç§¯ï¼‰å‡éœ€è¦': ['é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯',
  'å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒç´¢å¼•',
  'æ‰¾ä¸¤ä¸ªå’Œä¸ºç›®æ ‡å€¼ä¸”ä¸é‡å çš„å­æ•°ç»„'],
 'æ•°æ®ç»“æ„ç»´æŠ¤å‰ç¼€å’Œé—®é¢˜ï¼šäºŒç»´å‰ç¼€å’Œ': ['å…ƒç´ å’Œä¸ºç›®æ ‡å€¼çš„å­çŸ©é˜µæ•°é‡', 'çŸ©é˜µåŒºåŸŸå’Œ', 'æœ€å¤§å­çŸ©é˜µ', 'çŸ©å½¢åŒºåŸŸä¸è¶…è¿‡ K çš„æœ€å¤§æ•°å€¼å’Œ'],
 'è¿ç®—æ¨å¹¿': [],
 'è¿ç®—æ¨å¹¿é—®é¢˜ï¼šå‰ç¼€ç§¯': ['ä¹˜ç§¯æœ€å¤§å­æ•°ç»„', 'ä¹˜ç§¯å°äº K çš„å­æ•°ç»„', 'æœ€å K ä¸ªæ•°çš„ä¹˜ç§¯'],
 'è¿ç®—æ¨å¹¿é—®é¢˜ï¼šå‰ç¼€å¼‚æˆ–': ['å­æ•°ç»„å¼‚æˆ–æŸ¥è¯¢', 'å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®'],
 'å·®åˆ†': [],
 'å·®åˆ†é—®é¢˜': ['åŒºé—´åŠ æ³•'],
 'åŒºé—´åŠ¨æ€è§„åˆ’ç®€ä»‹': [],
 'åŒºé—´åŠ¨æ€è§„åˆ’ç»å…¸é—®é¢˜': [],
 'å›æ–‡ç›¸å…³é—®é¢˜': ['æœ€é•¿å›æ–‡å­ä¸²',
  'å›æ–‡å­ä¸²',
  'æœ€é•¿å›æ–‡å­åºåˆ—',
  'æ®µå¼å›æ–‡',
  'ç»Ÿè®¡ä¸åŒå›æ–‡å­å­—ç¬¦ä¸²',
  'è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°']}
```

### æ•°æ®ç»“æ„
Bæ ‘ï¼ŒB+æ ‘ï¼Œçº¿æ®µæ ‘ï¼Œè·³è¡¨
